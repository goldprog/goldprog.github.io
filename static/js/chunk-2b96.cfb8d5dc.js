(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-2b96"],{HFxR:function(e,t,i){"use strict";var a=i("pC/h");i.n(a).a},Rn9Y:function(e,t,i){"use strict";i.r(t);var a=i("cLjf"),n=i.n(a),r=i("hDQ3"),s=i.n(r),o=i("7Qib"),l=i("t3Un");function u(e){return Object(l.a)({url:"/recharge/index",method:"get",params:e})}var c=i("2nGb"),d=i("pZ2K"),p={components:{Pagination:i("Mz3J").a},mixins:[d.a],data:function(){return{listQuery:{gameid:"",openid:"",type:"",kefu:null,page:1,limit:10,ordey:"",by:""},total:0,monthList:[],loading:!0,exportLoading:!1,userList:[]}},computed:{styleWidth:function(){return{width:"230px"}}},created:function(){var e=this;this.monthList=Object(o.c)(),this.titleList=[{label:"隶属游戏",prop:"gamename",width:170,fixed:"left"},{label:"区服",prop:"clientid"},{label:"用户ID",prop:"openid",width:140},{label:"角色ID",prop:"roleid",width:140},{label:this.monthList[5]+"累充金额",prop:"q6",custom:!0,width:180},{label:this.monthList[4]+"累充金额",prop:"q5",custom:!0,width:180},{label:this.monthList[3]+"累充金额",prop:"q4",custom:!0,width:180},{label:this.monthList[2]+"累充金额",prop:"q3",custom:!0,width:180},{label:this.monthList[1]+"累充金额",prop:"q2",custom:!0,width:180},{label:this.monthList[0]+"累充金额",prop:"q1",custom:!0,width:180},{label:"所属客服",prop:"kefu",width:120,fixed:"right"}],setTimeout(function(){e.getHalfRechargeList()},20)},methods:{getHalfRechargeList:function(){var e=this;return s()(n.a.mark(function t(){var i,a,r,s,o,l;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i={pageSize:e.listQuery.limit,pageNumber:e.listQuery.page,ordey:e.listQuery.ordey,by:e.listQuery.by,gameid:e.listQuery.gameid,openid:e.listQuery.openid,kefuid:e.listQuery.kefu},e.loading=!0,t.next=4,u(i);case 4:a=t.sent,r=a.code,s=a.data,o=s.total,l=s.rows,e.loading=!1,r===c.a&&(e.total=o,e.userList=l);case 11:case"end":return t.stop()}},t,e)}))()},onQuery:function(){this.getHalfRechargeList()},onReset:function(e){this.$refs[e].resetFields(),this.getHalfRechargeList()},sortChange:function(e){var t=e.prop,i=e.order,a="ascending"===i?"ASC":"descending"===i?"DESC":"";this.listQuery.ordey=t,this.listQuery.by=a,this.getHalfRechargeList()},handleDownload:function(){var e=this;return s()(n.a.mark(function t(){var a;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getAllRechargeList();case 2:if(a=t.sent){t.next=6;break}return e.$message({type:"warning",message:"导出失败，请稍后再试"}),t.abrupt("return");case 6:Promise.all([i.e("chunk-a186"),i.e("chunk-8169")]).then(i.bind(null,"S/jZ")).then(function(t){var i=e.titleList.map(function(e){return e.label}).slice(0,-1),n=e.formatJson(["gamename","clientid","openid","roleid","q6","q5","q4","q3","q2","q1","kefu"],a);t.export_json_to_excel({header:i,data:n,autoWidth:!0,filename:"近半年充值"+Object(o.a)("{y}{m}{d}{h}{i}{s}")})});case 7:case"end":return t.stop()}},t,e)}))()},formatJson:function(e,t){return t.map(function(t){return e.map(function(e){return t[e]})})},getAllRechargeList:function(){var e=this;return s()(n.a.mark(function t(){var i,a,r,s;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i={pageSize:e.total,ordey:e.listQuery.ordey,by:e.listQuery.by,gameid:e.listQuery.gameid,openid:e.listQuery.openid,kefuid:e.listQuery.kefu},e.exportLoading=!0,t.prev=2,t.next=5,u(i);case 5:if(a=t.sent,r=a.code,s=a.data.rows,e.exportLoading=!1,r!==c.a){t.next=13;break}return t.abrupt("return",s);case 13:return t.abrupt("return",!1);case 14:t.next=19;break;case 16:t.prev=16,t.t0=t.catch(2),e.exportLoading=!1;case 19:case"end":return t.stop()}},t,e,[[2,16]])}))()},registerPackage:function(e){this.$router.push({name:"GiftsReg"})}}},m=(i("HFxR"),i("ZrdR")),f=Object(m.a)(p,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"app-container"},[i("div",{staticClass:"filter-container"},[i("el-form",{ref:"userListForm",staticClass:"form-inline",attrs:{inline:!0,model:e.listQuery,"label-width":"90px"}},[i("el-form-item",{attrs:{label:"隶属游戏",prop:"gameid"}},[i("el-select",{style:e.styleWidth,attrs:{clearable:"",placeholder:"全部游戏"},model:{value:e.listQuery.gameid,callback:function(t){e.$set(e.listQuery,"gameid",t)},expression:"listQuery.gameid"}},e._l(e.gamenameList,function(e,t){return i("el-option",{key:t,attrs:{label:e.gamename,value:e.gameid}})}),1)],1),e._v(" "),i("el-form-item",{attrs:{label:"用户ID",prop:"openid"}},[i("el-input",{style:e.styleWidth,attrs:{placeholder:"请输入"},model:{value:e.listQuery.openid,callback:function(t){e.$set(e.listQuery,"openid",t)},expression:"listQuery.openid"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"所属客服",prop:"kefu"}},[i("el-select",{style:e.styleWidth,attrs:{clearable:"",placeholder:"请选择"},model:{value:e.listQuery.kefu,callback:function(t){e.$set(e.listQuery,"kefu",t)},expression:"listQuery.kefu"}},e._l(e.customerList,function(e,t){return i("el-option",{key:t,attrs:{label:e.nick_name,value:e.id}})}),1)],1),e._v(" "),i("el-form-item",{staticStyle:{"margin-left":"20px"}},[i("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.onQuery}},[e._v("查询")]),e._v(" "),i("el-button",{attrs:{icon:"el-icon-refresh"},on:{click:function(t){return e.onReset("userListForm")}}},[e._v("重置")])],1)],1)],1),e._v(" "),i("div",{staticClass:"top-operate"},[i("el-button",{attrs:{icon:"el-icon-edit",type:"success",size:"mini"},on:{click:e.registerPackage}},[e._v("登记礼包")]),e._v(" "),i("el-button",{attrs:{loading:e.exportLoading,icon:"el-icon-download",type:"primary",size:"mini"},on:{click:e.handleDownload}},[e._v("批量导出")])],1),e._v(" "),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.userList,border:"",fit:""},on:{"sort-change":e.sortChange}},[e._l(e.titleList,function(e,t){return[i("el-table-column",{key:"item_last_"+t,attrs:{sortable:!!e.custom&&"custom",label:e.label,prop:e.prop,width:e.width?e.width:"auto",fixed:e.fixed,align:"center"}})]})],2),e._v(" "),i("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],attrs:{total:e.total,page:e.listQuery.page,limit:e.listQuery.limit},on:{"update:page":function(t){return e.$set(e.listQuery,"page",t)},"update:limit":function(t){return e.$set(e.listQuery,"limit",t)},pagination:e.getHalfRechargeList}})],1)},[],!1,null,"520109f2",null);f.options.__file="index.vue";t.default=f.exports},"pC/h":function(e,t,i){},pZ2K:function(e,t,i){"use strict";var a=i("cLjf"),n=i.n(a),r=i("hDQ3"),s=i.n(r),o=i("Nlzp"),l=i("2nGb");t.a={data:function(){return{gamenameList:[],customerList:[]}},created:function(){var e=this;setTimeout(function(){e.getGameNameList(),e.getCustomerList()},20)},methods:{getGameNameList:function(){var e=this;return s()(n.a.mark(function t(){var i,a,r;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(o.b)();case 2:i=t.sent,a=i.code,r=i.data,a===l.a&&(e.gamenameList=r);case 6:case"end":return t.stop()}},t,e)}))()},getCustomerList:function(){var e=this;return s()(n.a.mark(function t(){var i,a,r;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(o.a)();case 2:i=t.sent,a=i.code,r=i.data,a===l.a&&(e.customerList=r);case 6:case"end":return t.stop()}},t,e)}))()}}}}}]);