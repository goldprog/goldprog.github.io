(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-0710"],{LOVp:function(t,e,n){"use strict";var a=n("wxa9");n.n(a).a},cAve:function(t,e,n){"use strict";n.r(e);var a=n("bS4n"),r=n.n(a),i=n("cLjf"),l=n.n(i),o=n("hDQ3"),s=n.n(o),c=n("7Qib"),u=n("t3Un");function p(t){return Object(u.a)({url:"/user/kpiList",method:"post",data:t})}var m=n("2nGb"),d={components:{Pagination:n("Mz3J").a},data:function(){return{total:0,listQuery:{rz_time:"",page:1,limit:10},loading:!1,exportLoading:!1,kpiList:[],endDateOpt:{disabledDate:function(t){return t.getTime()>(new Date).getTime()-2592e6}}}},created:function(){var t=this;this.listQuery.rz_time=Object(c.d)(),setTimeout(function(){t.getKpiList()},20)},methods:{getKpiList:function(){var t=this;return s()(l.a.mark(function e(){var n,a,r,i,o;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,e.next=3,p(t.listQuery);case 3:n=e.sent,a=n.code,r=n.data,i=r.total,o=r.list,t.loading=!1,a===m.a&&(t.total=i,t.kpiList=o);case 10:case"end":return e.stop()}},e,t)}))()},onSearch:function(){this.listQuery.page=1,this.getKpiList()},handleDownload:function(){var t=this;return s()(l.a.mark(function e(){var a;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getAllKpiList();case 2:if(a=e.sent){e.next=5;break}return e.abrupt("return");case 5:Promise.all([n.e("chunk-a186"),n.e("chunk-963e")]).then(n.bind(null,"S/jZ")).then(function(e){var n=t._formatJson(["kefu","rz_time","rz_num","retain_num","retention_rate","permeation_num","permeability","mobile_num","collection_rate","monthly_income"],a);e.export_json_to_excel({header:["客服","认证时间","认证人数","留存人数","留存率","渗透人数","渗透率","手机号收集人数","收集率","当月收入"],data:n,autoWidth:!0,filename:"KPI列表"+Object(c.a)("{y}{m}{d}{h}{i}{s}")})});case 6:case"end":return e.stop()}},e,t)}))()},_formatJson:function(t,e){return e.map(function(e){return t.map(function(t){return e[t]})})},getAllKpiList:function(){var t=this;return s()(l.a.mark(function e(){var n,a,i,o;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=r()({},t.listQuery,{page:1,limit:t.total}),t.exportLoading=!0,e.prev=2,e.next=5,p(n);case 5:if(a=e.sent,i=a.code,o=a.data,t.exportLoading=!1,i!==m.a){e.next=13;break}return e.abrupt("return",o.list);case 13:return e.abrupt("return",!1);case 14:e.next=20;break;case 16:e.prev=16,e.t0=e.catch(2),t.exportLoading=!1,t.$msgbox({title:"出错了",message:"由于数据量太大，服务器承受不了压力了呀，您可以稍后再试，或者通过筛选导出部分数据！",confirmButtonText:"确定",type:"warning",callback:function(t){}});case 20:case"end":return e.stop()}},e,t,[[2,16]])}))()}}},b=(n("LOVp"),n("ZrdR")),f=Object(b.a)(d,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-container"},[n("el-row",{attrs:{type:"flex",justify:"space-between"}},[n("el-button",{attrs:{loading:t.exportLoading,type:"primary",icon:"el-icon-download"},on:{click:t.handleDownload}},[t._v("批量导出")]),t._v(" "),n("div",{staticClass:"block"},[n("span",{staticClass:"demonstration"},[t._v("认证时间：")]),t._v(" "),n("el-date-picker",{attrs:{"picker-options":t.endDateOpt,"value-format":"yyyy-MM",format:"yyyy 年 MM 月",type:"month",placeholder:"选择月"},model:{value:t.listQuery.rz_time,callback:function(e){t.$set(t.listQuery,"rz_time",e)},expression:"listQuery.rz_time"}}),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:t.onSearch}},[t._v("搜索")])],1)],1),t._v(" "),n("div",{staticClass:"table-wrapper"},[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.kpiList,border:"",fit:""}},[n("el-table-column",{attrs:{label:"客服",fixed:"",width:"180",prop:"kefu",align:"center"}}),t._v(" "),n("el-table-column",{attrs:{label:"认证时间",prop:"rz_time",align:"center"}}),t._v(" "),n("el-table-column",{attrs:{label:"认证人数",prop:"rz_num",align:"center"}}),t._v(" "),n("el-table-column",{attrs:{label:"留存人数",prop:"retain_num",align:"center"}}),t._v(" "),n("el-table-column",{attrs:{label:"留存率",prop:"retention_rate",align:"center"}}),t._v(" "),n("el-table-column",{attrs:{label:"渗透人数",prop:"permeation_num",align:"center"}}),t._v(" "),n("el-table-column",{attrs:{label:"渗透率",prop:"permeability",align:"center"}}),t._v(" "),n("el-table-column",{attrs:{label:"手机号收集人数",prop:"mobile_num",align:"center"}}),t._v(" "),n("el-table-column",{attrs:{label:"收集率",prop:"collection_rate",align:"center"}}),t._v(" "),n("el-table-column",{attrs:{label:"当月收入",prop:"monthly_income",align:"center"}})],1),t._v(" "),n("pagination",{directives:[{name:"show",rawName:"v-show",value:t.total>0,expression:"total>0"}],attrs:{total:t.total,page:t.listQuery.page,limit:t.listQuery.limit},on:{"update:page":function(e){return t.$set(t.listQuery,"page",e)},"update:limit":function(e){return t.$set(t.listQuery,"limit",e)},pagination:t.getKpiList}})],1)],1)},[],!1,null,"ee9cacbc",null);f.options.__file="index.vue";e.default=f.exports},wxa9:function(t,e,n){}}]);