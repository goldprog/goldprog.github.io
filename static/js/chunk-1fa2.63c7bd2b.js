(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-1fa2"],{"+tmS":function(t,e,a){"use strict";var n=a("HCx2");a.n(n).a},"0W2r":function(t,e,a){},"0o2y":function(t,e,a){"use strict";a.d(e,"b",function(){return l}),a.d(e,"a",function(){return i}),a.d(e,"c",function(){return s}),a.d(e,"d",function(){return r});var n=a("t3Un");function l(t){return Object(n.a)({url:"/user/gameTagsManage",method:"post",data:t})}function i(t){return Object(n.a)({url:"/user/userTagsList",method:"post",data:t})}function s(t){return Object(n.a)({url:"/user/userTagsDel",method:"post",data:t})}function r(t){return Object(n.a)({url:"/user/userTagsManage",method:"post",data:t})}},"2wEF":function(t,e,a){"use strict";var n=a("bS4n"),l=a.n(n),i=a("6ZY3"),s=a.n(i),r=a("IL3p"),o=a.n(r),u={props:{visible:{type:Boolean,default:!1},title:{type:String,required:!0},width:{type:String,default:"800px"},play_tags:{type:Array,default:function(){return[]}},style_tags:{type:Array,default:function(){return[]}},type:{type:String,required:!0},data:{type:Object,default:function(){return{}}}},data:function(){return{formData:{gamename:"",platform:null,play_tags:[],style_tags:[]},cloneFormData:null,rules:{gamename:[{required:!0,message:"请输入游戏名称",trigger:"blur"}],play_tags:[{validator:function(t,e,a){e.length<=0?a(new Error("请至少选择一个玩法标签")):e.length>8?a(new Error("最多可选择8个玩法标签")):a()},trigger:"change"}],style_tags:[{validator:function(t,e,a){e.length<=0?a(new Error("请至少选择一个风格标签")):e.length>12?a(new Error("最多可选择12个玩法标签")):a()},trigger:"change"}],platform:[{required:!0,message:"请选择所属平台",trigger:"change"}]}}},methods:{handleOpen:function(){this.cloneFormData=o()(this.formData),this.formData=s()({},this.formData,this.data)},handleCancel:function(){this.$emit("update:visible",!1),this._resetFields()},handleConfirm:function(){var t=this;this.$refs.addGameForm.validate(function(e){if(!e)return console.log("error submit!!"),!1;var a=l()({},t.formData,{play_tags:t.formData.play_tags.join(","),style_tags:t.formData.style_tags.join(",")});t.$emit(t.type,a)})},_resetFields:function(){this.$refs.addGameForm.resetFields(),this.formData=this.cloneFormData}}},c=(a("d7aY"),a("IpcV"),a("ZrdR")),d=Object(c.a)(u,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{visible:t.visible,title:t.title,width:t.width},on:{open:t.handleOpen,close:t.handleCancel}},[a("div",{staticClass:"form-container"},[a("el-form",{ref:"addGameForm",attrs:{model:t.formData,rules:t.rules,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"游戏名称",prop:"gamename"}},[a("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入游戏"},model:{value:t.formData.gamename,callback:function(e){t.$set(t.formData,"gamename",e)},expression:"formData.gamename"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"所属平台",prop:"platform"}},[a("el-radio-group",{model:{value:t.formData.platform,callback:function(e){t.$set(t.formData,"platform",e)},expression:"formData.platform"}},[a("el-radio",{attrs:{label:"Longtugame"}},[t._v("龙图游戏")]),t._v(" "),a("el-radio",{attrs:{label:"Other"}},[t._v("其他")])],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"玩法标签",prop:"play_tags"}},[a("el-checkbox-group",{model:{value:t.formData.play_tags,callback:function(e){t.$set(t.formData,"play_tags",e)},expression:"formData.play_tags"}},t._l(t.play_tags,function(t,e){return a("el-checkbox",{key:e,attrs:{label:t,name:"type"}})}),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"风格标签",prop:"style_tags"}},[a("el-checkbox-group",{model:{value:t.formData.style_tags,callback:function(e){t.$set(t.formData,"style_tags",e)},expression:"formData.style_tags"}},t._l(t.style_tags,function(t,e){return a("el-checkbox",{key:e,attrs:{label:t,name:"type"}})}),1)],1)],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.handleCancel}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.handleConfirm}},[t._v("确 定")])],1)])},[],!1,null,"c940ddaa",null);d.options.__file="index.vue";e.a=d.exports},CdUv:function(t,e,a){},F7Cd:function(t,e,a){a("VHJ/"),t.exports=a("g24s").Object.entries},G8w8:function(t,e,a){var n=a("Tx3c"),l=a("/bUn"),i=a("X4Qt").f;t.exports=function(t){return function(e){for(var a,s=l(e),r=n(s),o=r.length,u=0,c=[];o>u;)i.call(s,a=r[u++])&&c.push(t?[a,s[a]]:s[a]);return c}}},Gitk:function(t,e,a){"use strict";a.r(e);var n=a("cLjf"),l=a.n(n),i=a("hDQ3"),s=a.n(i),r=a("bS4n"),o=a.n(r),u=a("Mz3J"),c=a("Qn0k"),d=a("2wEF"),p=a("icuI"),m=a("2nGb"),f=a("8t5x"),g=a("ct8p"),b={regetList:!0,components:{Pagination:u.a,ManageLabel:c.a,AddGame:d.a},mixins:[g.a],provide:function(){return{refreshLabel:this.getGameList}},data:function(){return{listQuery:{gamename:"",platform:"",play_tags:"",style_tags:"",page:1,limit:10},loading:!0,handleType:"",total:200,gameInfo:null,labelTitle:"",manageLabelVisible:!1,playTagOptions:[],styleTagOptions:[],gameTagList:[],labelList:[]}},computed:o()({styleWidth:function(){return{width:"240px"}}},Object(f.b)(["rules"])),created:function(){var t=this;setTimeout(function(){t.getGameList()},20)},methods:{getGameList:function(){var t=this;return s()(l.a.mark(function e(){var a,n,i;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,e.next=3,Object(p.d)(t.listQuery);case 3:a=e.sent,n=a.code,i=a.data,t.loading=!1,n===m.a&&(t.gameTagList=i.list,t.playTagOptions=i.playTagOptions,t.styleTagOptions=i.styleTagOptions,t.total=i.total,t.labelList=t.collectTags(i));case 8:case"end":return e.stop()}},e,t)}))()},onQuery:function(){this.listQuery.page=1,this.getGameList()},onReset:function(t){this.$refs[t].resetFields(),this.listQuery.page=1,this.getGameList()},showEditGame:function(t){this.gameInfo=t,this.handleType="on-edit",this.labelTitle="编辑游戏",this.addGameVisible=!0},handleDelete:function(t){var e=this,a=t.id;this.$confirm("此操作将永久删除该游戏, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.deleteGame(a)}).catch(function(){})},deleteGame:function(t){var e=this;return s()(l.a.mark(function a(){var n,i,s;return l.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(p.b)({id:t});case 2:n=a.sent,i=n.code,s=n.msg,i===m.a?(e.getGameList(),e.$message({type:"success",message:s})):e.$message({type:"warning",message:s});case 6:case"end":return a.stop()}},a,e)}))()},handleManageLabel:function(){this.manageLabelVisible=!0},showAddGame:function(){this.gameInfo={},this.handleType="on-add",this.labelTitle="添加游戏",this.addGameVisible=!0},handleEditGame:function(t){var e=this;return s()(l.a.mark(function a(){var n,i,s,r;return l.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return n=o()({},t),a.next=3,Object(p.c)(n);case 3:i=a.sent,s=i.code,r=i.msg,s===m.a?(e.$message({type:"success",message:"游戏编辑成功"}),e.getGameList(),e.addGameVisible=!1):e.$message({type:"warning",message:r});case 7:case"end":return a.stop()}},a,e)}))()}}},h=(a("LmId"),a("ZrdR")),y=Object(h.a)(b,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"filter-container"},[a("el-form",{ref:"gametagForm",staticClass:"form-inline",attrs:{inline:!0,model:t.listQuery,"label-width":"90px"}},[a("el-form-item",{attrs:{label:"游戏名称",prop:"gamename"}},[a("el-input",{style:t.styleWidth,attrs:{placeholder:"请输入"},model:{value:t.listQuery.gamename,callback:function(e){t.$set(t.listQuery,"gamename",e)},expression:"listQuery.gamename"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"所属平台",prop:"platform"}},[a("el-select",{style:t.styleWidth,attrs:{clearable:"",placeholder:"请选择"},model:{value:t.listQuery.platform,callback:function(e){t.$set(t.listQuery,"platform",e)},expression:"listQuery.platform"}},[a("el-option",{attrs:{value:"Longtugame",label:"龙图游戏"}}),t._v(" "),a("el-option",{attrs:{value:"Other",label:"其他"}})],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"玩法标签",prop:"play_tags"}},[a("el-select",{style:t.styleWidth,attrs:{clearable:"",placeholder:"请选择"},model:{value:t.listQuery.play_tags,callback:function(e){t.$set(t.listQuery,"play_tags",e)},expression:"listQuery.play_tags"}},t._l(t.playTagOptions,function(t,e){return a("el-option",{key:e,attrs:{label:t,value:t}})}),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"风格标签",prop:"style_tags"}},[a("el-select",{style:t.styleWidth,attrs:{clearable:"",placeholder:"请选择"},model:{value:t.listQuery.style_tags,callback:function(e){t.$set(t.listQuery,"style_tags",e)},expression:"listQuery.style_tags"}},t._l(t.styleTagOptions,function(t,e){return a("el-option",{key:e,attrs:{label:t,value:t}})}),1)],1),t._v(" "),a("el-form-item",{staticStyle:{"margin-left":"20px"}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.onQuery}},[t._v("查询")]),t._v(" "),a("el-button",{attrs:{icon:"el-icon-refresh"},on:{click:function(e){return t.onReset("gametagForm")}}},[t._v("重置")])],1)],1)],1),t._v(" "),a("div",{staticClass:"top-operate"},[t.rules.GamesAdd?a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.showAddGame}},[t._v("添加游戏")]):t._e(),t._v(" "),t.rules.GamesManage?a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.handleManageLabel}},[t._v("管理标签")]):t._e()],1),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.gameTagList,border:"",fit:""}},[a("el-table-column",{attrs:{label:"游戏名称",fixed:"",width:"150",prop:"gamename",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"所属平台",width:"150",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t._f("platformFilter")(e.row.platform)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"玩法标签",width:"400",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.play_tags,function(e,n){return a("el-tag",{key:n,staticClass:"tag",attrs:{type:"info"}},[t._v(t._s(e))])})}}])}),t._v(" "),a("el-table-column",{attrs:{label:"风格标签","min-width":"500",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.style_tags,function(e,n){return a("el-tag",{key:n,staticClass:"tag",attrs:{type:"info"}},[t._v(t._s(e))])})}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"148",align:"center",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[t.rules.GamesEdit?a("el-button",{attrs:{type:"success",size:"mini"},on:{click:function(a){return t.showEditGame(e.row)}}},[t._v("编辑")]):t._e(),t._v(" "),t.rules.GamesDelete?a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(a){return t.handleDelete(e.row)}}},[t._v("删除")]):t._e()]}}])})],1),t._v(" "),a("pagination",{directives:[{name:"show",rawName:"v-show",value:t.total>0,expression:"total>0"}],attrs:{total:t.total,page:t.listQuery.page,limit:t.listQuery.limit},on:{"update:page":function(e){return t.$set(t.listQuery,"page",e)},"update:limit":function(e){return t.$set(t.listQuery,"limit",e)},pagination:t.getGameList}}),t._v(" "),a("manage-label",{attrs:{visible:t.manageLabelVisible,"label-data":t.labelList,title:"管理标签"},on:{"update:visible":function(e){t.manageLabelVisible=e}}}),t._v(" "),a("add-game",{attrs:{visible:t.addGameVisible,data:t.gameInfo,title:t.labelTitle,type:t.handleType,play_tags:t.playTagOptions,style_tags:t.styleTagOptions},on:{"update:visible":function(e){t.addGameVisible=e},"on-edit":t.handleEditGame,"on-add":t.handleAddGame}})],1)},[],!1,null,"4ce5e59c",null);y.options.__file="index.vue";e.default=y.exports},HCx2:function(t,e,a){},IpcV:function(t,e,a){"use strict";var n=a("0W2r");a.n(n).a},LmId:function(t,e,a){"use strict";var n=a("CdUv");a.n(n).a},Qn0k:function(t,e,a){"use strict";var n=a("cLjf"),l=a.n(n),i=a("hDQ3"),s=a.n(i),r=a("bS4n"),o=a.n(r),u={props:{title:{type:String,default:""},tags:{type:Array,default:function(){return[]}}},data:function(){return{newLabel:"",inputVisible:!1}},computed:{paddingStyle:function(){return{padding:"10px 0"}}},methods:{deletePlayTag:function(t){this.tags.splice(this.tags.indexOf(t),1),this.$emit("update:tags",this.tags)},addLabel:function(){var t=this;this.inputVisible=!0,this.$nextTick(function(e){t.$refs.saveTagInput.focus()})},handleInputConfirm:function(){var t=this.newLabel;if(t){if(this.tags.includes(t))return void this.$message({message:"当前标签已存在",type:"warning"});this.tags.push(t)}this.inputVisible=!1,this.newLabel="",this.$emit("update:tags",this.tags)}}},c=(a("dYe2"),a("ZrdR")),d=Object(c.a)(u,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"label-item-wrap"},[a("span",{staticClass:"title"},[t._v(t._s(t.title))]),t._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-plus",size:"mini"},on:{click:t.addLabel}},[t._v("添加")]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.tags.length<=0&&!t.inputVisible,expression:"tags.length<=0&&!inputVisible"}],staticClass:"nodata"},[t._v("暂无该标签")]),t._v(" "),a("div",{staticClass:"tags-wrap",style:t.tags.length>0||t.inputVisible?t.paddingStyle:""},[t._l(t.tags,function(e){return a("el-tag",{key:e.name,staticClass:"tag-item",attrs:{"disable-transitions":!1,type:"info",closable:""},on:{close:function(a){return t.deletePlayTag(e)}}},[t._v("\n      "+t._s(e)+"\n    ")])}),t._v(" "),a("el-input",{directives:[{name:"show",rawName:"v-show",value:t.inputVisible,expression:"inputVisible"}],ref:"saveTagInput",staticStyle:{width:"90px","vertical-align":"middle"},attrs:{size:"mini"},on:{blur:t.handleInputConfirm},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleInputConfirm(e)}},model:{value:t.newLabel,callback:function(e){t.newLabel=e},expression:"newLabel"}})],2)],1)},[],!1,null,"1b6deec0",null);d.options.__file="labelItem.vue";var p=d.exports,m=a("IL3p"),f=a.n(m),g=a("0o2y"),b=a("2nGb"),h=a("8t5x"),y=[{id:"1",label:"playTagOptions",title:"玩法标签"},{id:"2",label:"styleTagOptions",title:"风格标签"},{id:"3",label:"playerTags",title:"玩家认证标签"},{id:"4",label:"lostReason",title:"流失原因"},{id:"5",label:"ortherGames",title:"其他游戏"},{id:"6",label:"isRecack",title:"回归意愿"},{id:"7",label:"connectionState",title:"接通状态"}],v={components:{LabelItem:p},props:{visible:{type:Boolean,default:!1},title:{type:String,required:!0},width:{type:String,default:"800px"},labelData:{type:Array,default:function(){return[]}}},inject:["refreshLabel"],data:function(){return{labelList:[],loading:!1}},computed:o()({},Object(h.b)(["nick_name"])),methods:{handleOpen:function(){var t=f()(this.labelData);this.labelList=this.installLabel(t,y)},handleCancel:function(){this.$emit("update:visible",!1)},handleConfirm:function(){var t=this;return s()(l.a.mark(function e(){var a,n,i,s;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a={labelList:t.labelList},t.loading=!0,e.next=4,Object(g.b)(a);case 4:n=e.sent,i=n.code,s=n.msg,t.loading=!1,i===b.a?(t.$message({type:"success",message:s}),t.refreshLabel(),t.$emit("update:visible",!1)):t.$message({type:"warning",message:s});case 9:case"end":return e.stop()}},e,t)}))()},installLabel:function(t,e){var a=[];return e.map(function(e){return t.map(function(t){e.label===t.label&&a.push({id:e.id,label:e.label,title:e.title,tags:t.tags})})}),a}}},_=(a("+tmS"),Object(c.a)(v,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{visible:t.visible,title:t.title,width:t.width,"append-to-body":!0},on:{open:t.handleOpen,close:t.handleCancel}},[a("el-scrollbar",[a("div",{staticClass:"label-container"},t._l(t.labelList,function(e,n){return a("label-item",{key:n,staticClass:"label-item",attrs:{tags:e.tags,title:e.title},on:{"update:tags":function(a){return t.$set(e,"tags",a)}}})}),1)]),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.handleCancel}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{loading:t.loading,type:"primary"},on:{click:t.handleConfirm}},[t._v("确 定")])],1)],1)},[],!1,null,"76a492e0",null));_.options.__file="index.vue";e.a=_.exports},"VHJ/":function(t,e,a){var n=a("Rx2n"),l=a("G8w8")(!0);n(n.S,"Object",{entries:function(t){return l(t)}})},Vkta:function(t,e,a){t.exports={default:a("F7Cd"),__esModule:!0}},ct8p:function(t,e,a){"use strict";var n=a("Vkta"),l=a.n(n),i=a("rerW"),s=a.n(i),r=a("+XIM"),o=a.n(r),u=a("cLjf"),c=a.n(u),d=a("bS4n"),p=a.n(d),m=a("hDQ3"),f=a.n(m),g=a("icuI"),b=a("2nGb"),h=[{key:"Longtugame",display_name:"龙图游戏"},{key:"Other",display_name:"其他"}].reduce(function(t,e){return t[e.key]=e.display_name,t},{});e.a={data:function(){return{addGameVisible:!1}},filters:{platformFilter:function(t){return h[t]}},methods:{handleAddGame:function(t){var e=this;return f()(c.a.mark(function a(){var n,l,i,s;return c.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return n=p()({},t),a.next=3,Object(g.a)(n);case 3:l=a.sent,i=l.code,s=l.msg,i===b.a?(e.$message({type:"success",message:"游戏添加成功"}),e.$options.regetList&&e.getGameList(),e.addGameVisible=!1):e.$message({type:"warning",message:s});case 7:case"end":return a.stop()}},a,e)}))()},collectTags:function(t){var e=[],a=!0,n=!1,i=void 0;try{for(var r,u=s()(l()(t));!(a=(r=u.next()).done);a=!0){var c=r.value,d=o()(c,2),p=d[0],m=d[1];if("list"===p||"total"===p)break;e.push({label:p,tags:m})}}catch(t){n=!0,i=t}finally{try{!a&&u.return&&u.return()}finally{if(n)throw i}}return e}}}},"d+u7":function(t,e,a){},d7aY:function(t,e,a){"use strict";var n=a("yVli");a.n(n).a},dYe2:function(t,e,a){"use strict";var n=a("d+u7");a.n(n).a},icuI:function(t,e,a){"use strict";a.d(e,"d",function(){return l}),a.d(e,"b",function(){return i}),a.d(e,"a",function(){return s}),a.d(e,"c",function(){return r});var n=a("t3Un");function l(t){return Object(n.a)({url:"/user/gameTagsList",method:"post",data:t})}function i(t){return Object(n.a)({url:"/user/gameTagsDel",method:"post",data:t})}function s(t){return Object(n.a)({url:"/user/gameTagsAdd",method:"post",data:t})}function r(t){return Object(n.a)({url:"/user/gameTagsEdit",method:"post",data:t})}},yVli:function(t,e,a){}}]);