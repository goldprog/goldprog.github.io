(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-4a81"],{Gitk:function(e,t,a){"use strict";a.r(t);var l=a("cLjf"),n=a.n(l),s=a("hDQ3"),i=a.n(s),r=a("bS4n"),o=a.n(r),c=a("Mz3J"),u=a("Qn0k"),m=a("2wEF"),d=a("icuI"),p=a("2nGb"),g=a("8t5x"),f=a("ct8p"),y={regetList:!0,components:{Pagination:c.a,ManageLabel:u.a,AddGame:m.a},mixins:[f.a],provide:function(){return{refreshLabel:this.getGameList}},data:function(){return{listQuery:{gamename:"",platform:"",play_tags:"",style_tags:"",page:1,limit:10},loading:!0,handleType:"",total:200,gameInfo:null,labelTitle:"",manageLabelVisible:!1,playTagOptions:[],styleTagOptions:[],gameTagList:[],labelList:[]}},computed:o()({styleWidth:function(){return{width:"240px"}}},Object(g.b)(["rules"])),created:function(){var e=this;setTimeout(function(){e.getGameList()},20)},methods:{getGameList:function(){var e=this;return i()(n.a.mark(function t(){var a,l,s;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,t.next=3,Object(d.d)(e.listQuery);case 3:a=t.sent,l=a.code,s=a.data,e.loading=!1,l===p.a&&(e.gameTagList=s.list,e.playTagOptions=s.playTagOptions,e.styleTagOptions=s.styleTagOptions,e.total=s.total,e.labelList=e.collectTags(s));case 8:case"end":return t.stop()}},t,e)}))()},onQuery:function(){this.getGameList()},onReset:function(e){this.$refs[e].resetFields(),this.getGameList()},showEditGame:function(e){this.gameInfo=e,this.handleType="on-edit",this.labelTitle="编辑游戏",this.addGameVisible=!0},handleDelete:function(e){var t=this,a=e.id;this.$confirm("此操作将永久删除该游戏, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.deleteGame(a)}).catch(function(){})},deleteGame:function(e){var t=this;return i()(n.a.mark(function a(){var l,s,i;return n.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(d.b)({id:e});case 2:l=a.sent,s=l.code,i=l.msg,s===p.a?(t.getGameList(),t.$message({type:"success",message:i})):t.$message({type:"warning",message:i});case 6:case"end":return a.stop()}},a,t)}))()},handleManageLabel:function(){this.manageLabelVisible=!0},showAddGame:function(){this.gameInfo={},this.handleType="on-add",this.labelTitle="添加游戏",this.addGameVisible=!0},handleEditGame:function(e){var t=this;return i()(n.a.mark(function a(){var l,s,i,r;return n.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return l=o()({},e),a.next=3,Object(d.c)(l);case 3:s=a.sent,i=s.code,r=s.msg,i===p.a?(t.$message({type:"success",message:"游戏编辑成功"}),t.getGameList(),t.addGameVisible=!1):t.$message({type:"warning",message:r});case 7:case"end":return a.stop()}},a,t)}))()}}},b=(a("jQsq"),a("ZrdR")),h=Object(b.a)(y,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"filter-container"},[a("el-form",{ref:"gametagForm",staticClass:"form-inline",attrs:{inline:!0,model:e.listQuery,"label-width":"90px"}},[a("el-form-item",{attrs:{label:"游戏名称",prop:"gamename"}},[a("el-input",{style:e.styleWidth,attrs:{placeholder:"请输入"},model:{value:e.listQuery.gamename,callback:function(t){e.$set(e.listQuery,"gamename",t)},expression:"listQuery.gamename"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"所属平台",prop:"platform"}},[a("el-select",{style:e.styleWidth,attrs:{clearable:"",placeholder:"请选择"},model:{value:e.listQuery.platform,callback:function(t){e.$set(e.listQuery,"platform",t)},expression:"listQuery.platform"}},[a("el-option",{attrs:{value:"Longtugame",label:"龙图游戏"}}),e._v(" "),a("el-option",{attrs:{value:"Other",label:"其他"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"玩法标签",prop:"play_tags"}},[a("el-select",{style:e.styleWidth,attrs:{clearable:"",placeholder:"请选择"},model:{value:e.listQuery.play_tags,callback:function(t){e.$set(e.listQuery,"play_tags",t)},expression:"listQuery.play_tags"}},e._l(e.playTagOptions,function(e,t){return a("el-option",{key:t,attrs:{label:e,value:e}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"风格标签",prop:"style_tags"}},[a("el-select",{style:e.styleWidth,attrs:{clearable:"",placeholder:"请选择"},model:{value:e.listQuery.style_tags,callback:function(t){e.$set(e.listQuery,"style_tags",t)},expression:"listQuery.style_tags"}},e._l(e.styleTagOptions,function(e,t){return a("el-option",{key:t,attrs:{label:e,value:e}})}),1)],1),e._v(" "),a("el-form-item",{staticStyle:{"margin-left":"20px"}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.onQuery}},[e._v("查询")]),e._v(" "),a("el-button",{attrs:{icon:"el-icon-refresh"},on:{click:function(t){return e.onReset("gametagForm")}}},[e._v("重置")])],1)],1)],1),e._v(" "),a("div",{staticClass:"top-operate"},[e.rules.GamesAdd?a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.showAddGame}},[e._v("添加游戏")]):e._e(),e._v(" "),e.rules.GamesManage?a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.handleManageLabel}},[e._v("管理标签")]):e._e()],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.gameTagList,border:"",fit:""}},[a("el-table-column",{attrs:{label:"游戏名称",fixed:"",width:"150",prop:"gamename",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"所属平台",width:"150",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("platformFilter")(t.row.platform)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"玩法标签",width:"400",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.play_tags,function(t,l){return a("el-tag",{key:l,staticClass:"tag",attrs:{type:"info"}},[e._v(e._s(t))])})}}])}),e._v(" "),a("el-table-column",{attrs:{label:"风格标签","min-width":"500",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.style_tags,function(t,l){return a("el-tag",{key:l,staticClass:"tag",attrs:{type:"info"}},[e._v(e._s(t))])})}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"148",align:"center",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.rules.GamesEdit?a("el-button",{attrs:{type:"success",size:"mini"},on:{click:function(a){return e.showEditGame(t.row)}}},[e._v("编辑")]):e._e(),e._v(" "),e.rules.GamesDelete?a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(a){return e.handleDelete(t.row)}}},[e._v("删除")]):e._e()]}}])})],1),e._v(" "),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total>0"}],attrs:{total:e.total,page:e.listQuery.page,limit:e.listQuery.limit},on:{"update:page":function(t){return e.$set(e.listQuery,"page",t)},"update:limit":function(t){return e.$set(e.listQuery,"limit",t)},pagination:e.getGameList}}),e._v(" "),a("manage-label",{attrs:{visible:e.manageLabelVisible,"label-data":e.labelList,title:"管理标签"},on:{"update:visible":function(t){e.manageLabelVisible=t}}}),e._v(" "),a("add-game",{attrs:{visible:e.addGameVisible,data:e.gameInfo,title:e.labelTitle,type:e.handleType,play_tags:e.playTagOptions,style_tags:e.styleTagOptions},on:{"update:visible":function(t){e.addGameVisible=t},"on-edit":e.handleEditGame,"on-add":e.handleAddGame}})],1)},[],!1,null,"68f7907c",null);h.options.__file="index.vue";t.default=h.exports},UH2Q:function(e,t,a){},jQsq:function(e,t,a){"use strict";var l=a("UH2Q");a.n(l).a}}]);